
### Рецепты
+ [Создать рецепт](#create_recipe)
+ [Отредактировать рецепт](#edit_recipe)
+ [Частично отредактировать рецепт](#partial_edit_recipe)
+ [Получить информацию об одном рецепте](#view_recipe)
+ [Просмотр информацию о всех рецептах](#view_all_recipes)
+ [Удалить рецепт](#delete_recipe)

### Ингредиенты
+ [Получить список всех ингредиентов](#get_all_ingredients)

### Меры веса и объема
+ [Получить список всех единиц измерения](#get_all_measures)

---

<a name="create_recipe"></a>
### Создание рецепта
> требуется наличие [access-токена](./tokens.md#use-access_token) в заголовке авторизации  

**Запрос**

Формат запроса: _multipart/form-data_  
**`POST http://127.0.0.1:8000/api/recipes/`**


Список ключей:

|  Ключ |  Тип  | Данные                        
|------:|:-----:|-------------------------------|
|  json | text  | json строка с данными рецепта |
| files | array | массив файлов                 |

>В ключе `files` передается список файлов (главное фото рецепта и картинки к шагам, если нужно).  
>В json строке, где передается вся информация о рецепте, имена этих файлов прикрепляются по ключу `image`.  
>Все прикрепленные файлы должны быть в формате `jpg`, `jpeg` или `png`. Максимальный размер - 2 мб.  

Формат json строки:

```json
{
  "name": "Название",
  "description": "Описание",
  "cooking_instructions": "Инструкция по приготовлению",
  "cooking_time": "PT1H30M",
  "image": "avatar.jpg",
  "steps": [
    {
      "order": 1,
      "text": "почистить",
      "image": "photo12.jpg"
    },
    {
      "order": 2,
      "text": "кипятить"
    },
    {
      "order": 3,
      "text": "есть"
    }
  ],
  "ingredients": [
    {
      "name": "Лягушачьи лапки",
      "amount": "300",
      "measure": "мл."
    },
    {
      "name": "Телятина",
      "amount": "500",
      "measure": "гр."
    }
  ]
}
``` 

>**steps**  
> В списке должен быть указан как минимум один шаг, количество шагов не ограничено.  
> В ключе `image` указывается имя файла, переданного в массиве основного запроса по ключу `files`.  
> Ключ `image` можно не указывать, если у шага нет изображения. 

>**ingredients**  
> В списке должен быть указан как минимум один ингредиент.  
> В поле `name` и `measure` т.е. имя ингредиента и единица измерения, нужно указывать, только существующие в базе данных.  
>Получить [список ингредиентов](#get_all_ingredients) и [список единиц измерения](#get_all_measures).

>**cooking_time**  
>Используются стандартные обозначения интервалов времени по ISO 8601.  
>"PT" означает "Period of Time" и указывает, что следующие символы представляют собой период времени.  
>Число перед "H" представляет собой количество часов, в данном случае - 1 час.  
>Число перед "M" представляет собой количество минут, в данном случае - 30 минут.  
>Таким образом, "PT1H30M" означает, что время приготовления блюда составляет 1 час и 30 минут.  

**Ответ**

```json
{
  "id": 14,
  "name": "Название",
  "description": "Описание",
  "cooking_instructions": "Инструкция по приготовлению",
  "cooking_time": "PT1H30M",
  "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png",
  "steps": [
    {
      "order": 1,
      "text": "почистить",
      "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png"
    },
    {
      "order": 2,
      "text": "кипятить"
    },
    {
      "order": 3,
      "text": "есть"
    }
  ],
  "ingredients": [
    {
      "name": "Лягушачьи лапки",
      "amount": "300",
      "measure": "мл."
    },
    {
      "name": "Телятина",
      "amount": "500",
      "measure": "гр."
    }
  ]
}
```
**Ошибки**

* `400 Bad Request` – ошибка в параметрах запроса.
* `401 Unauthorized` - недействительный токен.

---

<a name="edit_recipe"></a>
### Редактирование рецепта 
> требуется наличие [access-токена](./tokens.md#use-access_token) в заголовке авторизации  

Запрос к серверу и ответ идентичен [созданию рецепта.](#create_recipe)  
Разница в том, что нужно указать `id` рецепта в адресе:

`PUT http://127.0.0.1:8000/api/recipes/{ID Рецепта}/`
Например:  
`PUT http://127.0.0.1:8000/api/recipes/1/`

В запросе необходимо указать ВСЕ поля, так же как при создании рецепта.

**Ошибки**

* `400 Bad Request` – ошибка в параметрах запроса.
* `401 Unauthorized` - недействительный токен.
* `404 Not found` - рецепт с таким `id` на найден.

---

<a name="partial_edit_recipe"></a>
### Частичное редактирование рецепта
> требуется наличие [access-токена](./tokens.md#use-access_token) в заголовке авторизации  

Запрос к серверу и ответ идентичен [созданию рецепта.](#create_recipe)  
Разница в том, что нужно указать `id` рецепта в адресе:

`PATCH http://127.0.0.1:8000/api/recipes/{ID Рецепта}/`  
Например:  
`PATCH http://127.0.0.1:8000/api/recipes/1/`

В запросе можно указать только те поля, которые необходимо изменить.
Например, `json` строка может выглядеть так:

```json
{
    "description": "Измененное описание",
    "steps": [
        {
            "order": 2,
            "text": "Измененный текст для шага 2"
        }]
}
```

**Ошибки**

* `400 Bad Request` – ошибка в параметрах запроса.
* `401 Unauthorized` - недействительный токен.
* `404 Not found` - рецепт с таким `id` на найден.

---

<a name="view_recipe"></a>
### Просмотр одного рецепта 

**Запрос**  
`GET http://127.0.0.1:8000/api/recipes/{ID Рецепта}/`  
Например:  
`GET http://127.0.0.1:8000/api/recipes/1/`

**Ответ**

```json
{
  "id": 14,
  "name": "Название",
  "description": "Описание",
  "cooking_instructions": "Инструкция по приготовлению",
  "cooking_time": "PT1H30M",
  "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png",
  "steps": [
    {
      "order": 1,
      "text": "почистить",
      "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png"
    },
    {
      "order": 2,
      "text": "кипятить"
    },
    {
      "order": 3,
      "text": "есть"
    }
  ],
  "ingredients": [
    {
      "name": "Лягушачьи лапки",
      "amount": "300",
      "measure": "мл."
    },
    {
      "name": "Телятина",
      "amount": "500",
      "measure": "гр."
    }
  ]
}
```

**Ошибки**
* `404 Not found` - рецепт с таким `id` на найден.

---

<a name="view_all_recipes"></a>
### Просмотр всех рецептов

**Запрос**   
`GET http://127.0.0.1:8000/api/recipes/`

**Ответ**

```json
[{
  "id": 14,
  "name": "Название",
  "description": "Описание",
  "cooking_instructions": "Инструкция по приготовлению",
  "cooking_time": "PT1H30M",
  "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png",
  "steps": [
    {
      "order": 1,
      "text": "почистить",
      "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png"
    },
    {
      "order": 2,
      "text": "кипятить"
    },
    {
      "order": 3,
      "text": "есть"
    }
  ],
  "ingredients": [
    {
      "name": "Лягушачьи лапки",
      "amount": "300",
      "measure": "мл."
    },
    {
      "name": "Телятина",
      "amount": "500",
      "measure": "гр."
    }
  ]
},{
  "id": 15,
  "name": "Название",
  "description": "Описание",
  "cooking_instructions": "Инструкция по приготовлению",
  "cooking_time": "PT1H30M",
  "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png",
  "steps": [
    {
      "order": 1,
      "text": "почистить",
      "image": "http://127.0.0.1:8000/media/images/b576fc4f102d4e31b75d91a6633f3f87.png"
    },
    {
      "order": 2,
      "text": "кипятить"
    },
    {
      "order": 3,
      "text": "есть"
    }
  ],
  "ingredients": [
    {
      "name": "Лягушачьи лапки",
      "amount": "300",
      "measure": "мл."
    },
    {
      "name": "Телятина",
      "amount": "500",
      "measure": "гр."
    }
  ]
}]
```

**Ошибки**
* ...

---

<a name="delete_recipe"></a>
### Удаление рецепта

**Запрос**
> требуется наличие [access-токена](./tokens.md#use-access_token) в заголовке авторизации.

`DELETE http://127.0.0.1:8000/api/recipes/{ID Рецепта}/`  
Например:  
`DELETE http://127.0.0.1:8000/api/recipes/1/`  

**Ответ**

При успешном удалении придет пустое тело ответа и статус:
`204 No Content`.

**Ошибки**
* `401 Unauthorized` - недействительный токен.
* `404 Not found` - рецепт с таким `id` на найден.

---

## Ингредиенты

<a name="get_all_ingredients"></a>
### Получить список всех ингредиентов

**Запрос**

`GET http://127.0.0.1:8000/api/recipes/ingredients/`   

**Ответ**

```json
[
  "Лягушачьи лапки",
  "Корейка свиная",
  "Филе свиное"
]
```

**Ошибки**
* ...

---


## Меры веса и объема

<a name="get_all_measures"></a>
### Получить список всех единиц измерения

**Запрос**

`GET http://127.0.0.1:8000/api/recipes/ingredients/measures/`   

**Ответ**

```json
[
  "мл.",
  "л.",
  "гр."
]
```

**Ошибки**
* ...
